<?php
/**
* @file
* This is my first module :D
* Implementation of hook_menu()
*/
function example_form_menu(){
$items['example_forms/form1'] = array(
	'title' => t('Example form 1'),
	'page callback' => 'drupal_get_form',
	//La funcion DRUPAL_GET_FORM esta dentro del API. Solo hay que llamarlo.
	//En FORM.INC
	'page argument' => array('example_form_form1'),
	'access callback' => TRUE,
	'description' => t('Example form 1'),
	'type' => MENU_CALLBACK
);
return $items;
}

function example_form_form1(){
//Por convencion se le anticipa un # a cada elemento.
	$form['description'] = array(
	 '#type' => 'item',
	 '#title' => t('A simple form'),
	);

	//Este es un MARCA. Solo para agregar texto
	$form['contact_information'] = array(
	 '#value' => t('Mi perrito esta gordito'),
	);

	$form['name'] = array(
	 '#type' => 'textfield',
	 '#title' => t('Name'),
	 '#required' => TRUE,
	);
	
	$form['lastname'] = array(
	 '#type' => 'textfield',
	 '#title' => t('Last name'),
	 '#required' => TRUE,
	);

	$form['copy'] = array(
	 '#type' => 'checkbox',
	 '#title' => t('Enviar una copia'),
	);

	$form['colores'] = array(
	 '#type' => 'checkboxes',
	 '#title' => t('Colores'),
	 '#default_value' => array('rojo', 'verde', 'azul'),
	 '#options' => array(
	 	'rojo' => t('rojo'),
		'verde' => t('verde'),
		'morado' => t('morado'),
		'fucsia' => t('fucsia'),
	 ),
	 '#description' => t('Selecciona un color... AhorA'), 
	);

	$form['submit'] = array(
	 '#type' => 'submit',
	 '#value' => t('enviar'),
	);

	$form['preview'] = array(
	 '#type' => 'button',
	 '#value' => t('Previsualizar'),
	 '#weight' => 1,
	);

 return $form;
}

function example_form_form1_validate($form, $form_state){
	$nombre = $form_state['values']['preview'];
	drupal_set_message("El nombre es: ".$nombre);
	if($nombre == 'Previsualizar'){
		drupal_set_message("Esta bien");
		//form_set_error("muy mal");

	}else{
		drupal_set_message("Esta mal");
		//form_set_error("muy mal");
	}
}

function example_forms_form_submit($form, $form_state){
	//Obtiene los valores
	$nombre = $form_state['values']['nombre'];
	$apellido = $form_state['values']['apellido'];
	//Graba la info en la tabla
	$query = "INSERT INTO tablita  VALUES('%s', '%s');";	
	db_query($query, $nombre, $apellido);
	//Setea un mensaje de exito
	drupal_set_message("Se grabo exitosamente". $nombre . $apellido);
}

function example_forms_form_alter($form, $form_state, $form_id){
	if($form_id == 'nodetype_node_form'){
		$form['copy'] = array(
	 	  '#type' => 'checkbox',
	 	  '#title' => t('Enviar una copia'),
		);
	}
}
